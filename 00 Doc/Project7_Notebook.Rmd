---
title: "Analyzing the 2013 AP CS Test Report and the 2015 Income Census Data"
author: A Collaborative Project by Andrew Chou, Jady Zeng, Alexis Zhang, and Ronghao
  Zhang
output:
  html_notebook:
    toc: yes
    toc_depth: 3
    toc_float:
      collapsed: no
  html_document:
    toc: yes
    toc_depth: '2'
---

##  R Configuration
Below we display our sessionInfo().
```{r sessionInfo}
sessionInfo(package=NULL)
```

![](../03 Visualizations/cover.jpeg)

##  Our Datasets
> The first [dataset](http://home.cc.gatech.edu/ice-gt/556) 
> was created by students at Georgia Tech University. It focuses on the demographics of test-takers for the AP CS test administered by the Collegeboard in 2013. 
> The second dataset that we used to join the AP dataset contains census data related to income in the U.S in 2015.
> Download AP dataset [here](http://home.cc.gatech.edu/ice-gt/uploads/556/DetailedStateInfoAP-CS-A-2006-2013-with-PercentBlackAndHIspanicByState-fixed.xlsx).
> Download the 2015 US Census Income data [US Census population estimates, Income (American Community Survey, 2011-2015)](https://data.world/uscensusbureau/acs-2015-5-e-income)


###  AP Test Dataset Columns
Measure | Description
------------------ | ---------------------------------------------------
2013 data  | The U.S. States
# schools  | Number of school that offer AP CS tests 
Total # | Number of AP CS test takers
Yield per teacher | Number of student test takers per teacher
# passed | The number of test takers who scored 3 out of 5 or above
% passed | The percentage of passed test takers over the total number of test takers
# female | The number of female test taker
# female passed| The number of female test taker who scored 3 out of 5 or above
% female passed| The percentage of passed female test takers over the total number of female test takers
% female | The percentage of female test takers over the total number of test takers 
# Black | The number of black test taker
# Black Passed| The number of black test taker who scored 3 out of 5 or above
% Black passed| The percentage of passed black test takers over the total number of test takers 
% black in state | Percentage of black in state 
# Hispanic | The number of Hispanic test taker
# Hispanic passed | The number of Hispanic test taker who scored 3 out of 5 or above
% Hispanic passed | The percentage of passed Hispanic test takers over the total number of test takers 
% Hispanic in state | Percentage of Hispanics in state
% taking / % state * 100 | Attempt rate of Hispanic test takers 


###  Census Dataset Columns  
Measure | Description
------------------ | ---------------------------------------
State | State abbreviation
AreaName | State full name 
median_household_income | Median household income in 2015
per_capita_income | A measurement an area's average income
gini_index | A measurement of inequality. (0 stands for perfect equality)

##  Methodology
### Original Dataset
> The 2013 AP CS test dataset before the cleaning process

```{r, echo= FALSE, warning= FALSE, message= FALSE, fig.height=4, fig.width=5} 
source("../01 Data/original_data.R")
```


### ETL Logic
   > 1. As seen from the previous table, the uncleaned AP CS data is filled up with empty columns, asterisks and multiple columns that we will not use in our data visualization. We followed the following process to clean up the data:
   
       i. Build an ETL script to pull the data from data.world and proceed the cleaning process 
       ii. Remove empty column from dataframe.
       iii. Remove last 4 rows of dataframe.
       iv. Remove asterisks (*) from dataframe and replace them with ""
       v. Replace any record that is "" with NA.
       vi. Rename columns of dataframe for clarity and simplicity.
       vii. Generate a cleaned up dataset called "ap_cs_2013_states_clean.csv"
       
   >2. In order to join the AP CS 2013 dataset to the 2015 Income Census data, we ran a query on data.world in order to rename the columns for simplicity, and we downloaded it as "acs-2015-5-e-income-queried.csv".
   >3. Use Tableau's web data connector to import the datasets. Join the two datasets together by State to merge the datasets in order for us to explore the relationship between two datasets.
   >4. We had to set the "S17 DV Project 6" data.world datasets PUBLIC in order to access and work on it in RStudio when we wrote the server code.
   >5. Write SQL and R SDK in order to create the same Barcharts with ggplot. 
   >6. Create the Shiny App which includes all the three visualizations, and publish it onto the Shiny server.

### Cleaned Dataset
> This is the AP CS Test dataset after the cleaning process:

```{r, echo= FALSE, warning= FALSE, message= FALSE, fig.height=4, fig.width=5} 
source("../01 Data/etl_final_project.R")
```


##  Visualizations
Visualizations were created using both Tableau and R Shiny. 

###  Box Plots
<!-- ![](../03 Visualizations/vis1.png) -->

> **Insight for Figure 1: *Average growth rate in states for different industry* **  
This barchart displays the average growth rate in selected states for selected industry. The states selected are the top 5 states which has the highest sum revenue during 2015. The industry set used as filter includes the 6 industries which has the highest sum revenue in 2015. The horizontal bars represent the average growth rates for the specific industry in individual states. The window reference line is the average of the average growth rate for the industry in selectedstates.

> From the barchart we see that in Business product and services industry, state Georgia is growing fast, because its average growth rate is extremely higher than other states??. In Construction industry, California is playing the leading role. And in Human Resources industry, Florida shows the fastest growth. However, for Health industry, there is no obvious leading state; all states developed it well during year2015. 



### Histograms
<!-- ![](../03 Visualizations/vis2.png) -->

> **Insight for Figure 2: *High revenue ID set on Growth* **  
We create a ID Set using company id and its revenue. We select companies whose revenue greater than 10 billion as high revenue companies, and there are 19 of them. The bar chart displays the growth rate for these 19 companies. 

> Among these 19 companies with highest revenue, only two companies?? growth rate exceeds the average growth rate across the total 5000 companies.


### Scatter Plots
<!-- ![](../03 Visualizations/vis3.png) -->

> **Insight for Figure 3: *Average revenue for 5 highest revenue state by yrs on list* **  
We first create a set of the five states with the highest revenue. For all the companies in these five states, we group them by years on the list. The bar chart shows the average revenue each group. We also calculate the difference between each bar and the average for the pane.

> In Texas, the longer companies stay on the list, the companies tend to have higher revenue. However, the extremes appear at the 9th year in Georgia and at 7th years in New York.

### Cross Tabs
<!-- ![](../03 Visualizations/vis4.png) -->

> **Insight for Figure 4: *Average revenue for 5 highest revenue state by yrs on list* **  
We first create a set of the five states with the highest revenue. For all the companies in these five states, we group them by years on the list. The bar chart shows the average revenue each group. We also calculate the difference between each bar and the average for the pane.

> In Texas, the longer companies stay on the list, the companies tend to have higher revenue. However, the extremes appear at the 9th year in Georgia and at 7th years in New York.

### Barcharts
<!-- ![](../03 Visualizations/vis5.png) -->

> **Insight for Figure 5: *Average revenue for 5 highest revenue state by yrs on list* **  
We first create a set of the five states with the highest revenue. For all the companies in these five states, we group them by years on the list. The bar chart shows the average revenue each group. We also calculate the difference between each bar and the average for the pane.

> In Texas, the longer companies stay on the list, the companies tend to have higher revenue. However, the extremes appear at the 9th year in Georgia and at 7th years in New York.


## Shiny App
To view our Shiny web app we made for the project, please click the image below. 
[![Shiny](../03 Visualizations/shiny.png)](https://ronzhang.shinyapps.io/project6/)







